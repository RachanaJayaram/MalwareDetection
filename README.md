# MalwareDetection

**Feature Engineering and Dimensionality Reduction**

1. By doing basic analysis of features, we can observe that many features are unrelated to malware detection/prediction and can be dropped

-MachineIdentifier 
-LocaleEnglishNameIdentifier
-Census_InternalBatteryType
-Census_InternalBatteryNumberOfCharges
-Census_OSInstallLanguageIdentifier
-Census_InternalPrimaryDiagonalDisplaySizeInInches
-Census_InternalPrimaryDisplayResolutionHorizontal
-Census_InternalPrimaryDisplayResolutionVertical
-Census_OSUILocaleIdentifier
-Census_IsTouchEnabled
-Census_IsPenCapable
-Census_IsAlwaysOnAlwaysConnectedCapable
-Wdft_RegionIdentifier

2. By looking at the % of null/empty values of columns, we can observe some features can be dropped

column                                                % empty

-PuaMode                                              99.9741
-Census_ProcessorClass                                99.5894
-DefaultBrowsersIdentifier                            95.1416
-Census_IsFlightingInternal                           83.0440

80.0000 was taken as threshold

3. By looking at the unbalancedness of the feature values (i.e most of the values belonging to a single class), we can see that some features can be dropped

 column                             % unbalancedness     unique_vals

-Census_IsWIMBootEnabled             99.999969           2
-IsBeta                              99.999249           2
-Census_IsFlightsDisabled            99.998996           2
-AutoSampleOptIn                     99.997108           2
-Census_ThresholdOptIn               99.974924           2
-SMode                               99.953708           2
-Census_IsPortableOperatingSystem    99.945480           2      
-Census_DeviceFamily                 99.838256           3
-UacLuaenable                        99.392547           11
-Census_IsVirtualDevice              99.296055           2

99.0000 was taken as threshold

4. By looking at the correlation plot, we can drop some features 

 Feature 1 vs Feature 2   =  corr

-AvSigVersion vs EngineVersion = 0.97
-IsSxsPassiveMode vs RtpStateBitfield = -0.90
-IeVerIdentifier vs OsBuildLab = 0.91
-OsVer vs Platform = 0.99
-SkuEdition vs OsSuite = -0.90
-Census_OSEdition vs Census_OSSkuName = 1.00
-Census_OSVersion vs Census_OSBuildNumber = 0.97
-Census_OSArchitecture vs Processor = 1.0

The following features were removed in the above case

-EngineVersion (AvSigVersion conveys more info than EngineVersion )
-RtpStateBitfield (IsSxsPassiveMode conveys more info than RtpStateBitfield )
-IeVerIdentifier (OsBuildLab conveys more info than IeVerIdentifier )
-Platform (OsVer has more unique values than Platform)
-SkuEdition (OsSuite is numerical though it may be categorical and SkuEdition is a nominal variable)
-Census_OSSkuName (Census_OSEdition has more unique values than Census_OSSkuName)
-Census_OSBuildNumber (Census_OSVersion conveys more info than Census_OSBuildNumber)
-Processor (Census_OSArchitecture conveys more info than Processor)

After removing all the features, there are 2 features which have a significant % of missing values

column                                                % empty

-SmartScreen                                          35.6108
-OrganizationIdentifier                               30.8415

The missing values in SmartScreen can be replaced by it's default value which is RequireAdmin. Source : https://en.wikipedia.org/wiki/Microsoft_SmartScreen

The missing values in OrganizationIdentifier can be replaced by 0.

All this is done by feature.py

Steps to run :

1) Install all requirements numpy,matplotlib,pandas and seaborn (all are there in kaggle)
2) Change the path of the train.csv in line 92. use /kaggle/input/microsoft-malware-prediction/train.csv as path if using it in kaggle
3) Change path of the destination where the new_train.csv must be stored

The new csv will have all the unwanted features removed and will not have any 

